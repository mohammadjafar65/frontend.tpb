# public_html/.htaccess  â€” SPA at /frontend/build

<IfModule mod_rewrite.c>
  RewriteEngine On

  # --- Canonical host + HTTPS (root domain only) ---
  # Redirect http -> https OR www -> non-www
  RewriteCond %{HTTPS} !=on [OR]
  RewriteCond %{HTTP_HOST} ^www\.thepilgrimbeez\.com$ [NC]
  RewriteRule ^ https://thepilgrimbeez.com%{REQUEST_URI} [L,R=301]

  # --- Map all requests to /frontend/build/ unless already there ---
  RewriteCond %{REQUEST_URI} !^/frontend/build/
  RewriteRule ^(.*)$ /frontend/build/$1 [L]

  # --- Serve real files/folders directly (after the rewrite above) ---
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # --- SPA fallback ---
  RewriteRule ^ /frontend/build/index.html [L]
</IfModule>

# Good defaults
Options -Indexes